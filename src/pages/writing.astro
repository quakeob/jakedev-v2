---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout title="Writing â€” Jake Davis" description="Thoughts on AI, neuroscience, and building things.">
  <section class="pt-32 pb-24 px-6">
    <div class="max-w-3xl mx-auto">
      <div class="reveal mb-16">
        <p class="text-sm font-medium tracking-widest uppercase mb-3" style="color: var(--accent);">Writing</p>
        <h1 class="text-3xl md:text-5xl font-bold tracking-tight mb-4" style="color: var(--text);">Thoughts & Technical Notes<span style="color: var(--accent);">.</span></h1>
        <p class="text-lg" style="color: var(--text-2);">On AI, neuroscience, web dev, and whatever else I'm building.</p>
      </div>

      <div class="space-y-2">
        {posts.map((post) => (
          <a href={`/writing/${post.id}`} class="block card p-6 reveal group">
            <div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-1 mb-2">
              <h2 class="text-lg font-bold group-hover:translate-x-1 transition-transform" style="color: var(--text);">
                {post.data.title}
              </h2>
              <time class="text-sm shrink-0" style="color: var(--text-3);">
                {post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
              </time>
            </div>
            <p class="text-sm leading-relaxed mb-3" style="color: var(--text-2);">{post.data.description}</p>
            {post.data.tags && (
              <div class="flex flex-wrap gap-2">
                {post.data.tags.map((tag: string) => (
                  <span class="text-xs px-2 py-0.5 rounded-md" style="background: var(--bg-3); color: var(--text-3);">{tag}</span>
                ))}
              </div>
            )}
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
